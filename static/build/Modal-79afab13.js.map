{"version":3,"file":"Modal-79afab13.js","sources":["../../svelte-app/node_modules/sveltestrap/src/ModalBackdrop.svelte","../../svelte-app/node_modules/sveltestrap/src/ModalBody.svelte","../../svelte-app/node_modules/sveltestrap/src/ModalHeader.svelte","../../svelte-app/node_modules/sveltestrap/src/Modal.svelte"],"sourcesContent":["<script>\n  // TODO only allow single backdrop open at once.\n  import { onMount } from 'svelte';\n  import classnames from './utils';\n  import { backdropIn, backdropOut } from './transitions.js';\n\n  let className = '';\n  export { className as class };\n  export let isOpen = false;\n  export let fade = true;\n\n  let loaded = false;\n  onMount(() => {\n    loaded = true;\n  });\n\n  $: classes = classnames(className, 'modal-backdrop');\n</script>\n\n{#if isOpen && loaded}\n  <div\n    role=\"presentation\"\n    {...$$restProps}\n    on:click\n    class={classes}\n    class:fade\n    in:backdropIn\n    out:backdropOut\n  />\n{/if}\n","<script>\n  import classnames from './utils';\n\n  let className = '';\n  export { className as class };\n\n  $: classes = classnames(className, 'modal-body');\n</script>\n\n<div {...$$restProps} class={classes}>\n  <slot />\n</div>\n","<script>\n  import classnames from './utils';\n\n  let className = '';\n  export { className as class };\n  export let toggle = undefined;\n  export let closeAriaLabel = 'Close';\n  export let children = undefined;\n  export let id = undefined;\n\n  $: classes = classnames(className, 'modal-header');\n</script>\n\n<div {...$$restProps} class={classes}>\n  <h5 class=\"modal-title\" {id}>\n    {#if children}\n      {children}\n    {:else}\n      <slot />\n    {/if}\n  </h5>\n  <slot name=\"close\">\n    {#if typeof toggle === 'function'}\n      <button\n        type=\"button\"\n        on:click={toggle}\n        class=\"btn-close\"\n        aria-label={closeAriaLabel}\n      />\n    {/if}\n  </slot>\n</div>\n","<script context=\"module\">\n  // TODO fade option\n  let openCount = 0;\n</script>\n\n<script>\n  import classnames from './utils';\n  import { browserEvent } from './utils';\n  import {\n    createEventDispatcher,\n    onDestroy,\n    onMount,\n    afterUpdate\n  } from 'svelte';\n  import { modalIn, modalOut } from './transitions';\n  import InlineContainer from './InlineContainer.svelte';\n  import ModalBackdrop from './ModalBackdrop.svelte';\n  import ModalBody from './ModalBody.svelte';\n  import ModalHeader from './ModalHeader.svelte';\n  import Portal from './Portal.svelte';\n  import {\n    conditionallyUpdateScrollbar,\n    getOriginalBodyPadding,\n    setScrollbarWidth,\n    uuid\n  } from './utils';\n\n  const dispatch = createEventDispatcher();\n\n  let className = '';\n  let staticModal = false;\n  export { className as class };\n  export { staticModal as static };\n  export let isOpen = false;\n  export let autoFocus = true;\n  export let body = false;\n  export let centered = false;\n  export let container = undefined;\n  export let fullscreen = false;\n  export let header = undefined;\n  export let scrollable = false;\n  export let size = '';\n  export let toggle = undefined;\n  export let labelledBy = header ? `modal-${uuid()}` : undefined;\n  export let backdrop = true;\n  export let wrapClassName = '';\n  export let modalClassName = '';\n  export let contentClassName = '';\n  export let fade = true;\n  export let unmountOnClose = true;\n  export let returnFocusAfterClose = true;\n\n  let hasOpened = false;\n  let _isMounted = false;\n  let _triggeringElement;\n  let _originalBodyPadding;\n  let _lastIsOpen = isOpen;\n  let _lastHasOpened = hasOpened;\n  let _dialog;\n  let _mouseDownElement;\n  let _removeEscListener;\n\n  onMount(() => {\n    if (isOpen) {\n      init();\n      hasOpened = true;\n    }\n\n    if (hasOpened && autoFocus) {\n      setFocus();\n    }\n  });\n\n  onDestroy(() => {\n    destroy();\n    if (hasOpened) {\n      close();\n    }\n  });\n\n  afterUpdate(() => {\n    if (isOpen && !_lastIsOpen) {\n      init();\n      hasOpened = true;\n    }\n\n    if (autoFocus && hasOpened && !_lastHasOpened) {\n      setFocus();\n    }\n\n    _lastIsOpen = isOpen;\n    _lastHasOpened = hasOpened;\n  });\n\n  function setFocus() {\n    if (\n      _dialog &&\n      _dialog.parentNode &&\n      typeof _dialog.parentNode.focus === 'function'\n    ) {\n      _dialog.parentNode.focus();\n    }\n  }\n\n  function init() {\n    try {\n      _triggeringElement = document.activeElement;\n    } catch (err) {\n      _triggeringElement = null;\n    }\n\n    if (!staticModal) {\n      _originalBodyPadding = getOriginalBodyPadding();\n      conditionallyUpdateScrollbar();\n      if (openCount === 0) {\n        document.body.className = classnames(\n          document.body.className,\n          'modal-open'\n        );\n      }\n\n      ++openCount;\n    }\n    _isMounted = true;\n  }\n\n  function manageFocusAfterClose() {\n    if (_triggeringElement) {\n      if (\n        typeof _triggeringElement.focus === 'function' &&\n        returnFocusAfterClose\n      ) {\n        _triggeringElement.focus();\n      }\n\n      _triggeringElement = null;\n    }\n  }\n\n  function destroy() {\n    manageFocusAfterClose();\n  }\n\n  function close() {\n    if (openCount <= 1) {\n      document.body.classList.remove('modal-open');\n    }\n\n    manageFocusAfterClose();\n    openCount = Math.max(0, openCount - 1);\n\n    setScrollbarWidth(_originalBodyPadding);\n  }\n\n  function handleBackdropClick(e) {\n    if (e.target === _mouseDownElement) {\n      if (!isOpen || !backdrop) {\n        return;\n      }\n\n      const backdropElem = _dialog ? _dialog.parentNode : null;\n      if (\n        backdrop === true &&\n        backdropElem &&\n        e.target === backdropElem &&\n        toggle\n      ) {\n        e.stopPropagation();\n        toggle(e);\n      }\n    }\n  }\n\n  function onModalOpened() {\n    dispatch('open');\n    _removeEscListener = browserEvent(document, 'keydown', (event) => {\n      if (event.key && event.key === 'Escape') {\n        if (toggle && backdrop === true) {\n          if (_removeEscListener) _removeEscListener();\n          toggle(event);\n        }\n      }\n    });\n  }\n\n  function onModalClosing() {\n    dispatch('closing');\n    if (_removeEscListener) {\n      _removeEscListener();\n    }\n  }\n\n  function onModalClosed() {\n    dispatch('close');\n    if (unmountOnClose) {\n      destroy();\n    }\n    close();\n    if (_isMounted) {\n      hasOpened = false;\n    }\n    _isMounted = false;\n  }\n\n  function handleBackdropMouseDown(e) {\n    _mouseDownElement = e.target;\n  }\n\n  const dialogBaseClass = 'modal-dialog';\n\n  $: classes = classnames(dialogBaseClass, className, {\n    [`modal-${size}`]: size,\n    'modal-fullscreen': fullscreen === true,\n    [`modal-fullscreen-${fullscreen}-down`]:\n      fullscreen && typeof fullscreen === 'string',\n    [`${dialogBaseClass}-centered`]: centered,\n    [`${dialogBaseClass}-scrollable`]: scrollable\n  });\n\n  $: outer = container === 'inline' || staticModal ? InlineContainer : Portal;\n</script>\n\n{#if _isMounted}\n  <svelte:component this={outer}>\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\n    <div class={wrapClassName} tabindex=\"-1\" {...$$restProps}>\n      {#if isOpen}\n        <!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n        <div\n          in:modalIn\n          out:modalOut\n          aria-labelledby={labelledBy}\n          class={classnames('modal', modalClassName, {\n            fade,\n            'position-static': staticModal\n          })}\n          role=\"dialog\"\n          on:introstart={() => dispatch('opening')}\n          on:introend={onModalOpened}\n          on:outrostart={onModalClosing}\n          on:outroend={onModalClosed}\n          on:click={handleBackdropClick}\n          on:mousedown={handleBackdropMouseDown}\n        >\n          <slot name=\"external\" />\n          <div class={classes} role=\"document\" bind:this={_dialog}>\n            <div class={classnames('modal-content', contentClassName)}>\n              {#if header}\n                <ModalHeader {toggle} id={labelledBy}>\n                  {header}\n                </ModalHeader>\n              {/if}\n              {#if body}\n                <ModalBody>\n                  <slot />\n                </ModalBody>\n              {:else}\n                <slot />\n              {/if}\n            </div>\n          </div>\n        </div>\n      {/if}\n    </div>\n  </svelte:component>\n{/if}\n{#if backdrop && !staticModal}\n  <svelte:component this={outer}>\n    <ModalBackdrop {fade} {isOpen} />\n  </svelte:component>\n{/if}\n\n<style>\n  :global(.modal-open) {\n    overflow: hidden;\n    padding-right: 0;\n  }\n</style>\n"],"names":["ctx","insert","target","div","anchor","if_block","create_if_block","class","className","$$props","isOpen","fade","loaded","onMount","$$invalidate","classes","classnames","div_levels","button","is_function","apply","this","arguments","append","h5","toggle","closeAriaLabel","children","id","create_if_block_4","div2","div1","div0","create_if_block_2","create_if_block_1","if_block1","openCount","dialogBaseClass","dispatch","createEventDispatcher","_triggeringElement","_originalBodyPadding","_dialog","_mouseDownElement","_removeEscListener","static","staticModal","autoFocus","body","centered","container","fullscreen","header","scrollable","size","labelledBy","uuid","undefined","backdrop","wrapClassName","modalClassName","contentClassName","unmountOnClose","returnFocusAfterClose","hasOpened","_isMounted","_lastIsOpen","_lastHasOpened","setFocus","parentNode","focus","init","document","activeElement","err","getOriginalBodyPadding","conditionallyUpdateScrollbar","manageFocusAfterClose","destroy","close","classList","remove","Math","max","setScrollbarWidth","onDestroy","afterUpdate","outer","InlineContainer","Portal","e","backdropElem","stopPropagation","browserEvent","event","key","$$value"],"mappings":"sgBAsBQA,EAAW,UAERA,EAAO,wGAJhBC,EAQEC,EAAAC,EAAAC,qFANIJ,EAAW,qBAERA,EAAO,iMALbK,EAAAL,MAAUA,EAAM,IAAAM,GAAAN,yEAAhBA,MAAUA,EAAM,oPAbfO,MAAAC,EAAY,IAAEC,GAEPC,OAAAA,GAAS,GAAKD,GACdE,KAAAA,GAAO,GAAIF,EAElBG,GAAS,SACbC,GAAO,KACLC,EAAA,EAAAF,GAAS,EAAI,yKAGZG,EAAUC,EAAWR,EAAW,sNCP5B,IAAAS,EAAA,CAAAjB,YAAoBA,EAAO,gGAApCC,EAEMC,EAAAC,EAAAC,kHAFGJ,EAAW,qBAASA,EAAO,8JAN9BO,MAAAC,EAAY,IAAEC,qJAGfM,EAAUC,EAAWR,EAAW,mZCU9BR,EAAQ,sCAARA,EAAQ,6IAWKA,EAAc,YAJ5BC,EAKEC,EAAAgB,EAAAd,iCAHUe,EAAAnB,OAAAA,EAAM,GAAAoB,MAAAC,KAAAC,sDAEJtB,EAAc,wGAZzBA,EAAQ,GAAA,qFAODK,EAAW,mBAAXL,MAAqBM,GAAAN,kEAAV,mBAAXA,qGATP,IAAAiB,EAAA,CAAAjB,YAAoBA,EAAO,gKAApCC,EAkBMC,EAAAC,EAAAC,GAjBJmB,EAMKpB,EAAAqB,sUAPExB,EAAW,sBAASA,EAAO,2NAV9BO,MAAAC,EAAY,IAAEC,GAEPgB,OAAAA,GAAkBhB,GAClBiB,eAAAA,EAAiB,SAAOjB,GACxBkB,SAAAA,GAAoBlB,GACpBmB,GAAAA,GAAcnB,0RAEtBM,EAAUC,EAAWR,EAAW,kNCqNXR,EAAK,2PAALA,EAAK,KAAA,6VAwBZA,EAAM,IAAA6B,GAAA7B,+CAKNA,EAAI,GAAA,yHANCgB,EAAW,gBAAiBhB,EAAgB,iBAD9CA,EAAO,kDAdFA,EAAU,kBACpBgB,EAAW,QAAShB,EAAc,GAAA,CACvCW,KAAAX,EAAI,IACJ,kBAAmBA,EAAW,mCANlCC,EAiCMC,EAAA4B,EAAA1B,yBAhBJmB,EAeMO,EAAAC,GAdJR,EAaMQ,EAAAC,oGArBKhC,EAAa,sBACXA,EAAc,oBAChBA,EAAa,iBAChBA,EAAmB,qBACfA,EAAuB,uFAK5BA,EAAM,+PADDgB,EAAW,gBAAiBhB,EAAgB,oDAD9CA,EAAO,0CAdFA,EAAU,2BACpBgB,EAAW,QAAShB,EAAc,GAAA,CACvCW,KAAAX,EAAI,IACJ,kBAAmBA,EAAW,mTAcAA,EAAU,oJAAVA,EAAU,6KACjCA,EAAM,yCAANA,EAAM,+yBAvBdA,EAAM,IAAAiC,GAAAjC,aADDA,EAAa,oBAAoBA,EAAW,gGAAxDC,EAsCMC,EAAAC,EAAAC,+BArCCJ,EAAM,yIADDA,EAAa,kCAAoBA,EAAW,oGA0ClCA,EAAK,wPAALA,EAAK,KAAA,8iBA7C1BA,EAAU,KAAAkC,GAAAlC,GA4CVmC,EAAAnC,OAAaA,EAAW,IAAAM,GAAAN,2GA5CxBA,EAAU,mHA4CVA,OAAaA,EAAW,2MAxQvB,IAAAoC,GAAY,EA8MV,MAAAC,GAAkB,+UArLlB,MAAAC,EAAWC,IAEb,IAyBAC,EACAC,EAGAC,EACAC,EACAC,GA/BArC,MAAAC,EAAY,IAAEC,GACdoC,OAAAC,GAAc,GAAKrC,GAGZC,OAAAA,GAAS,GAAKD,GACdsC,UAAAA,GAAY,GAAItC,GAChBuC,KAAAA,GAAO,GAAKvC,GACZwC,SAAAA,GAAW,GAAKxC,GAChByC,UAAAA,GAAqBzC,GACrB0C,WAAAA,GAAa,GAAK1C,GAClB2C,OAAAA,GAAkB3C,GAClB4C,WAAAA,GAAa,GAAK5C,GAClB6C,KAAAA,EAAO,IAAE7C,GACTgB,OAAAA,GAAkBhB,GAClB8C,WAAAA,GAAaH,EAAkB,SAAAI,WAAWC,IAAShD,GACnDiD,SAAAA,GAAW,GAAIjD,GACfkD,cAAAA,EAAgB,IAAElD,GAClBmD,eAAAA,EAAiB,IAAEnD,GACnBoD,iBAAAA,EAAmB,IAAEpD,GACrBE,KAAAA,GAAO,GAAIF,GACXqD,eAAAA,GAAiB,GAAIrD,GACrBsD,sBAAAA,GAAwB,GAAItD,EAEnCuD,GAAY,EACZC,GAAa,EAGbC,EAAcxD,EACdyD,GAAiBH,WAqCZI,KAEL1B,GACAA,EAAQ2B,YAC4B,mBAA7B3B,EAAQ2B,WAAWC,OAE1B5B,EAAQ2B,WAAWC,iBAIdC,SAEL/B,EAAqBgC,SAASC,oBACvBC,GACPlC,EAAqB,KAGlBM,IACHL,EAAuBkC,IACvBC,IACkB,IAAdxC,KACFoC,SAASxB,KAAKxC,UAAYQ,EACxBwD,SAASxB,KAAKxC,UACd,iBAIF4B,IAEJtB,EAAA,GAAAmD,GAAa,YAGNY,KACHrC,IAEoC,mBAA7BA,EAAmB8B,OAC1BP,GAEAvB,EAAmB8B,QAGrB9B,EAAqB,eAIhBsC,KACPD,cAGOE,KACH3C,IAAa,GACfoC,SAASxB,KAAKgC,UAAUC,OAAO,cAGjCJ,KACAzC,GAAY8C,KAAKC,IAAI,EAAG/C,GAAY,GAEpCgD,EAAkB3C,GAzFpB5B,GAAO,KACDH,IACF6D,KACAP,GAAY,GAGVA,GAAajB,GACfqB,QAIJiB,GAAS,KACPP,KACId,GACFe,QAIJO,GAAW,KACL5E,IAAWwD,IACbK,KACAP,GAAY,GAGVjB,GAAaiB,IAAcG,IAC7BC,KAGFF,EAAcxD,EACdyD,GAAiBH,CAAS,y2BAuHzBjD,EAAUC,EAAWqB,GAAiB7B,EAAS,CACtC,CAAA,SAAA8C,KAASA,EACnB,oBAAmC,IAAfH,EACC,CAAA,oBAAAA,UACnBA,GAAoC,iBAAfA,EACnB,CAAA,GAAAd,eAA6BY,EAC7B,CAAA,GAAAZ,iBAA+BgB,kCAGlCkC,EAAsB,WAAdrC,GAA0BJ,EAAc0C,EAAkBC,qCAjE5D,SAAoBC,MACvBA,EAAExF,SAAWyC,EAAiB,CAC3B,IAAAjC,IAAWgD,SAIV,MAAAiC,EAAejD,EAAUA,EAAQ2B,WAAa,MAErC,IAAbX,GACAiC,GACAD,EAAExF,SAAWyF,GACblE,IAEAiE,EAAEE,kBACFnE,EAAOiE,iBAMXpD,EAAS,QACTM,EAAqBiD,EAAarB,SAAU,WAAYsB,IAClDA,EAAMC,KAAqB,WAAdD,EAAMC,KACjBtE,IAAuB,IAAbiC,IACRd,GAAoBA,IACxBnB,EAAOqE,mBAObxD,EAAS,WACLM,GACFA,gBAKFN,EAAS,SACLwB,GACFgB,KAEFC,KACId,IACFD,GAAY,GAEdlD,EAAA,GAAAmD,GAAa,IAGN,SAAwByB,GAC/B/C,EAAoB+C,EAAExF,sEAwCgCwC,EAAOsD,cARlC,IAAA1D,EAAS","x_google_ignoreList":[0,1,2,3]}