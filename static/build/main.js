import{S as t,i as e,s,c as n,e as o,a,b as r,d as l,f as i,l as c,g as u,h as d,u as v,j as p,k as f,t as $,m,n as h,r as y,o as g,p as b,q as w,v as x,w as M,x as C,y as T,z as k,A as _,B as q,C as j}from"./stores-91dc2ba8.js";const H=t=>({}),O=t=>({});function S(t){let e,s,g,b,w,x,M;const C=t[3].header,T=n(C,t,t[2],O);return{c(){e=o("dialog"),s=o("div"),T&&T.c(),g=a(),b=o("button"),b.textContent="OK",b.autofocus=!0,r(b,"class","svelte-19dligb"),r(s,"class","svelte-19dligb"),r(e,"class","svelte-19dligb")},m(n,o){l(n,e,o),i(e,s),T&&T.m(s,null),i(s,g),i(s,b),t[5](e),w=!0,b.focus(),x||(M=[c(b,"click",E),c(s,"click",u(t[4])),c(e,"close",t[6]),c(e,"click",d(t[7]))],x=!0)},p(t,[e]){T&&T.p&&(!w||4&e)&&v(T,C,t,t[2],w?f(C,t[2],e,H):p(t[2]),O)},i(t){w||($(T,t),w=!0)},o(t){m(T,t),w=!1},d(s){s&&h(e),T&&T.d(s),t[5](null),x=!1,y(M)}}}function E(){window.location.href="/logout"}function L(t,e,s){let n,{$$slots:o={},$$scope:a}=e,{showModal:r}=e;return t.$$set=t=>{"showModal"in t&&s(0,r=t.showModal),"$$scope"in t&&s(2,a=t.$$scope)},t.$$.update=()=>{3&t.$$.dirty&&n&&r&&n.showModal()},[r,n,a,o,function(e){g.call(this,t,e)},function(t){b[t?"unshift":"push"]((()=>{n=t,s(1,n)}))},()=>s(0,r=!1),()=>n.close()]}class P extends t{constructor(t){super(),e(this,t,L,S,s,{showModal:0})}}function z(t){let e,s,n,u,d,v,p,f,$,m,g,b,M,C,T,k,_,q,j,H,O,S,E,L,P,z,A;return{c(){e=o("div"),s=o("h2"),s.textContent="ユーザ登録",n=a(),u=o("form"),d=o("div"),v=o("label"),v.textContent="メールアドレス",p=a(),f=o("input"),$=a(),m=o("div"),g=o("label"),g.textContent="パスワード",b=a(),M=o("input"),C=a(),T=o("div"),k=o("label"),k.textContent="ユーザ名",_=a(),q=o("input"),j=a(),H=o("div"),O=o("label"),O.textContent="備考",S=a(),E=o("textarea"),L=a(),P=o("div"),P.innerHTML='<button type="submit" class="register-btn svelte-16vtn0y">登録</button> \n            <button type="button" class="cancel-btn svelte-16vtn0y">キャンセル</button>',r(s,"class","svelte-16vtn0y"),r(v,"for","email"),r(v,"class","svelte-16vtn0y"),r(f,"type","email"),r(f,"id","email"),r(f,"name","email"),f.required=!0,r(f,"class","svelte-16vtn0y"),r(d,"class","form-group svelte-16vtn0y"),r(g,"for","password"),r(g,"class","svelte-16vtn0y"),r(M,"type","password"),r(M,"id","password"),r(M,"name","password"),M.required=!0,r(M,"class","svelte-16vtn0y"),r(m,"class","form-group svelte-16vtn0y"),r(k,"for","username"),r(k,"class","svelte-16vtn0y"),r(q,"type","text"),r(q,"id","username"),r(q,"name","username"),q.required=!0,r(q,"class","svelte-16vtn0y"),r(T,"class","form-group svelte-16vtn0y"),r(O,"for","note"),r(O,"class","svelte-16vtn0y"),r(E,"id","note"),r(E,"name","note"),r(E,"class","svelte-16vtn0y"),r(H,"class","form-group svelte-16vtn0y"),r(P,"class","button-group svelte-16vtn0y"),r(u,"action",t[0]),r(u,"method","post"),r(u,"id","register-form"),r(e,"class","registration-container svelte-16vtn0y")},m(o,a){l(o,e,a),i(e,s),i(e,n),i(e,u),i(u,d),i(d,v),i(d,p),i(d,f),w(f,t[1]),i(u,$),i(u,m),i(m,g),i(m,b),i(m,M),w(M,t[2]),i(u,C),i(u,T),i(T,k),i(T,_),i(T,q),w(q,t[3]),i(u,j),i(u,H),i(H,O),i(H,S),i(H,E),w(E,t[4]),i(u,L),i(u,P),z||(A=[c(f,"input",t[6]),c(M,"input",t[7]),c(q,"input",t[8]),c(E,"input",t[9]),c(u,"submit",t[5])],z=!0)},p(t,[e]){2&e&&f.value!==t[1]&&w(f,t[1]),4&e&&M.value!==t[2]&&w(M,t[2]),8&e&&q.value!==t[3]&&w(q,t[3]),16&e&&w(E,t[4]),1&e&&r(u,"action",t[0])},i:x,o:x,d(t){t&&h(e),z=!1,y(A)}}}function A(t,e,s){let{register_url:n}=e,o="",a="",r="",l="";return t.$$set=t=>{"register_url"in t&&s(0,n=t.register_url)},[n,o,a,r,l,async function(t){t.preventDefault();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:a,username:r,note:l})};try{const t=await fetch(n,e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);M.set(!0)}catch(t){console.error("Error:",t)}},function(){o=this.value,s(1,o)},function(){a=this.value,s(2,a)},function(){r=this.value,s(3,r)},function(){l=this.value,s(4,l)}]}class B extends t{constructor(t){super(),e(this,t,A,z,s,{register_url:0})}}function D(t){let e;return{c(){e=o("h2"),e.innerHTML="ユーザ登録が完了しました。<br/>\n\t\tログイン画面に遷移します。",r(e,"slot","header")},m(t,s){l(t,e,s)},p:x,d(t){t&&h(e)}}}function J(t){let e,s,n,o,r;function i(e){t[2](e)}e=new B({props:{register_url:"/register"}});let c={$$slots:{header:[D]},$$scope:{ctx:t}};return void 0!==t[0]&&(c.showModal=t[0]),n=new P({props:c}),b.push((()=>C(n,"showModal",i))),{c(){T(e.$$.fragment),s=a(),T(n.$$.fragment)},m(t,o){k(e,t,o),l(t,s,o),k(n,t,o),r=!0},p(t,[e]){const s={};8&e&&(s.$$scope={dirty:e,ctx:t}),!o&&1&e&&(o=!0,s.showModal=t[0],_((()=>o=!1))),n.$set(s)},i(t){r||($(e.$$.fragment,t),$(n.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),m(n.$$.fragment,t),r=!1},d(t){q(e,t),t&&h(s),q(n,t)}}}function K(t,e,s){let n;j(t,M,(t=>s(1,n=t)));let o=!1;return t.$$.update=()=>{2&t.$$.dirty&&s(0,o=n)},[o,n,function(t){o=t,s(0,o),s(1,n)}]}const N=new class extends t{constructor(t){super(),e(this,t,K,J,s,{})}}({target:document.body});export{N as default};
//# sourceMappingURL=main.js.map
