{"version":3,"file":"scraping.js","sources":["../../svelte-app/src/Scraping.svelte","../../svelte-app/src/scraping.js"],"sourcesContent":["<script>\n\timport { Button, Modal, ModalBody, ModalHeader } from \"sveltestrap\";\n\timport Menu from \"./components/Menu.svelte\";\n\timport Spinner from \"./components/Spinner.svelte\";\n\timport { isLoading } from \"./components/stores.js\";\n\tlet isModalOpen = false;\n\tlet selectedFile;\n\tlet selectedFileName = \"\";\n\tlet fileInput;\n\n\tfunction toggleModal() {\n\t\tisModalOpen = !isModalOpen;\n\t}\n\tfunction handleFileChange(event) {\n\t\tselectedFile = event.target.files[0];\n\t\tselectedFileName = selectedFile.name;\n\t}\n\n\tasync function handleSubmit(event) {\n\t\tevent.preventDefault(); // デフォルトのフォーム送信を防止\n\t\tif (!selectedFile) {\n\t\t\talert(\"ファイルが選択されていません。\");\n\t\t\treturn;\n\t\t}\n\t\tisLoading.set(true);\n\t\tconst formData = new FormData();\n\t\tformData.append(\"fileUpload\", selectedFile);\n\n\t\ttry {\n\t\t\tconst response = await fetch(\"/upload\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: formData,\n\t\t\t});\n\t\t\tif (response.ok) {\n\t\t\t\tconst blob = await response.blob();\n\t\t\t\tconst downloadUrl = window.URL.createObjectURL(blob);\n\t\t\t\tconst a = document.createElement(\"a\");\n\t\t\t\ta.style.display = \"none\";\n\t\t\t\ta.href = downloadUrl;\n\t\t\t\ta.download = response.headers\n\t\t\t\t\t.get(\"Content-Disposition\")\n\t\t\t\t\t.match(/filename=\"?(.+)\"?/)[1];\n\t\t\t\tdocument.body.appendChild(a);\n\t\t\t\ta.click();\n\t\t\t\tdocument.body.removeChild(a);\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Upload failed\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Upload failed:\", error);\n\t\t}\n\t\tisLoading.set(false);\n\t\tfileInput.value = \"\";\n\t\tselectedFile = null;\n\t\tselectedFileName = \"\";\n\t}\n</script>\n\n<Spinner />\n\n<form on:submit={handleSubmit}>\n\t<div class=\"screen\">\n\t\t<div class=\"menu-area\">\n\t\t\t<Menu />\n\t\t</div>\n\t\t<h1 class=\"text-light\">\n\t\t\t企業名リストCSVファイルをアップロードしてください\n\t\t</h1>\n\t\t<div class=\"upload-container\">\n\t\t\t<label class=\"upload-container\">\n\t\t\t\t<i class=\"fa fa-cloud-upload-alt fa-3x\"></i>\n\t\t\t\t<span class=\"mt-2\">ファイルを選択</span>\n\t\t\t\t<span class=\"mt-2 border-bottom\">{selectedFileName}</span>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tid=\"fileUpload\"\n\t\t\t\t\tname=\"fileUpload\"\n\t\t\t\t\tbind:this={fileInput}\n\t\t\t\t\ton:input={handleFileChange}\n\t\t\t\t\tstyle=\"display: none;\"\n\t\t\t\t\taccept=\".csv\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<Button type=\"submit\" outline color=\"light\">\n\t\t\t企業情報を取得する <i class=\"fa fa-upload ml-2\"></i>\n\t\t</Button>\n\t\t<Button type=\"button\" color=\"light\" on:click={toggleModal}\n\t\t\t>使い方がわからない方へ <i class=\"fa fa-question-circle ml-2\"\n\t\t\t></i></Button\n\t\t>\n\t\t<Modal isOpen={isModalOpen} toggle={toggleModal} size=\"lg\">\n\t\t\t<ModalHeader toggle={toggleModal}\n\t\t\t\t>企業情報リスト取得機能の使い方</ModalHeader\n\t\t\t>\n\t\t\t<ModalBody class=\"modal-body\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li class=\"item\">\n\t\t\t\t\t\t<h5>概要の説明</h5>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t調査対象の企業名が列挙されたCSVファイルをアップロードすることで、企業のホームページのURLが格納されたCSVファイルをダウンロードすることができます。\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item\">\n\t\t\t\t\t\t<h5>アップロードするCSVファイルのサンプル</h5>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"/static/images/upload_csv.png\"\n\t\t\t\t\t\t\talt=\"アップロードCSVサンプル\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item\">\n\t\t\t\t\t\t<h5>ダウンロードされるファイルのサンプル</h5>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"/static/images/download_csv.png\"\n\t\t\t\t\t\t\talt=\"ダウンロードCSVサンプル\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<Button color=\"primary\" on:click={toggleModal}>閉じる</Button>\n\t\t\t</ModalBody>\n\t\t</Modal>\n\t</div>\n</form>\n\n<style>\n\t.menu-area {\n\t\tposition: absolute; /* 位置を絶対位置で指定 */\n\t\tright: 10px; /* 右端から0pxの位置 */\n\t\ttop: 5px; /* 上端から0pxの位置 */\n\t\tz-index: 1000; /* 他の要素の上に表示 */\n\t}\n\t.upload-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\tmax-width: 400px;\n\t\theight: 200px;\n\t\tcolor: #f8fafc;\n\t\tbackground-color: #1e293b;\n\t\tborder-radius: 0.75rem;\n\t\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n\t\ttransition: background-color 300ms ease-in-out;\n\t\tcursor: pointer;\n\t}\n\t.upload-container:hover {\n\t\tbackground-color: #334155;\n\t}\n\t.screen {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\theight: 100vh;\n\t\tbackground: linear-gradient(to bottom right, #6ee7b7, #3b82f6);\n\t\tfont-family: Roboto, sans-serif;\n\t\tgap: 2rem;\n\t}\n\t.item {\n\t\tmargin-bottom: 20px; /* 各アイテム間にスペースを追加 */\n\t}\n\t.item img {\n\t\twidth: 100%; /* イメージを適切に表示 */\n\t\tmax-width: 550px; /* イメージの最大横幅を制限 */\n\t}\n</style>\n","import App from './Scraping.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tname: 'scraping'\n\t}\n});\n\nexport default app;"],"names":["App"],"mappings":"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"}